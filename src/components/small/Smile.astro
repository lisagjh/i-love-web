<script>
  document.addEventListener("DOMContentLoaded", function () {
    const eyes = document.querySelectorAll(".left-eye-pupil, .right-eye-pupil");
    const eyeAreas = document.querySelectorAll(
      ".left-eye-area, .right-eye-area"
    );

    document.addEventListener("mousemove", function (event) {
      eyes.forEach((pupil, index) => {
        const eyeArea = eyeAreas[index].getBoundingClientRect();
        const pupilCenterX = eyeArea.x + eyeArea.width / 2;
        const pupilCenterY = eyeArea.y + eyeArea.height / 2;

        // Get distance from eye center to cursor
        const deltaX = event.clientX - pupilCenterX;
        const deltaY = event.clientY - pupilCenterY;

        // Limit movement range
        const maxMove = 15; // Max distance the pupil can move inside the eye
        const distance = Math.sqrt(deltaX ** 2 + deltaY ** 2);
        const factor = Math.min(maxMove / distance, 1); // Ensure the pupil stays inside the eye

        // Apply movement
        pupil.style.transform = `translate(${deltaX * factor}px, ${deltaY * factor}px)`;
      });
    });
  });
</script>

<svg
  width="458"
  height="458"
  viewBox="0 0 458 458"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <!-- Face -->
  <circle class="face" cx="229" cy="229" r="229" fill="#FFAA00"></circle>

  <mask
    id="mask0_127_14"
    style="mask-type:alpha"
    maskUnits="userSpaceOnUse"
    x="0"
    y="0"
    width="458"
    height="458"
  >
    <circle cx="229" cy="229" r="229" fill="#FFAA00"></circle>
  </mask>

  <!-- Blush -->
  <g class="blush-group" mask="url(#mask0_127_14)">
    <g class="blush-left" filter="url(#filter0_f_127_14)">
      <circle cx="24.5" cy="254.5" r="65.5" fill="#E01E1E"></circle>
    </g>
    <g class="blush-right" filter="url(#filter1_f_127_14)">
      <circle cx="413.5" cy="257.5" r="65.5" fill="#E01E1E"></circle>
    </g>
  </g>

  <!-- Smiles -->
  <path
    class="smile-regular"
    d="M132 281C132 281 158.5 330 230.128 330C297 330 326 281 326 281"
    stroke="black"
    stroke-width="15"
    stroke-linecap="round"></path>
  <path
    class="smile-small"
    d="M176 283C176 283 187.5 322 231.5 322C275.5 322 283 283 283 283"
    stroke="black"
    stroke-width="15"
    stroke-linecap="round"></path>

  <!-- Eyes and pupils -->
  <rect
    class="left-eye-area"
    x="140"
    y="132"
    width="60"
    height="98"
    rx="20"
    fill="#FFAA00"></rect>
  <rect
    class="left-eye-pupil"
    x="150"
    y="148"
    width="40"
    height="65"
    rx="20"
    fill="#121212"></rect>

  <rect
    class="right-eye-area"
    x="258"
    y="132"
    width="60"
    height="98"
    rx="20"
    fill="#FFAA00"></rect>
  <rect
    class="right-eye-pupil"
    x="268"
    y="148"
    width="40"
    height="65"
    rx="20"
    fill="#121212"></rect>

  <!-- Small Eyes -->
  <path
    class="left-eye-small eye-small"
    d="M192 200C192 200 185.229 181 159.322 181C133.416 181 129 200 129 200"
    stroke="black"
    stroke-width="15"
    stroke-linecap="round"></path>
  <path
    class="right-eye-small eye-small"
    d="M322 200C322 200 315.229 181 289.322 181C263.416 181 259 200 259 200"
    stroke="black"
    stroke-width="15"
    stroke-linecap="round"></path>

  <!-- Filters for blush -->
  <defs>
    <filter
      id="filter0_f_127_14"
      x="-141"
      y="89"
      width="331"
      height="331"
      filterUnits="userSpaceOnUse"
      color-interpolation-filters="sRGB"
    >
      <feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood>
      <feBlend
        mode="normal"
        in="SourceGraphic"
        in2="BackgroundImageFix"
        result="shape"></feBlend>
      <feGaussianBlur stdDeviation="50" result="effect1_foregroundBlur_127_14"
      ></feGaussianBlur>
    </filter>
    <filter
      id="filter1_f_127_14"
      x="248"
      y="92"
      width="331"
      height="331"
      filterUnits="userSpaceOnUse"
      color-interpolation-filters="sRGB"
    >
      <feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood>
      <feBlend
        mode="normal"
        in="SourceGraphic"
        in2="BackgroundImageFix"
        result="shape"></feBlend>
      <feGaussianBlur stdDeviation="50" result="effect1_foregroundBlur_127_14"
      ></feGaussianBlur>
    </filter>
  </defs>
</svg>

<style>
  .hidden {
    display: none;
  }
  svg {
    width: 80vw;
  }
  .smile-small {
    display: none;
  }

  .eye-small {
    display: none;
  }

  .blush-group {
    opacity: 0.3;
  }

  /* animationa */
  .left-eye-pupil,
  .right-eye-pupil {
    transition: transform 0.05s linear; /* Smooth movement */
  }
  
  .smile-regular {
    transform-origin: center;
    animation: move-smile 5s ease-in-out infinite alternate;
  }

  @keyframes move-smile {
    0% {
      scale: 0.9;
      translate: 0 -1%;
    }

    100% {
      scale: 1.1;
      translate: 0 0;
    }
  }
</style>
